<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    <title>Admin Dashboard - Cloudflare Swag</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Outfit:wght@600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-primary: #ffffff;
            --bg-secondary: #f8fafc;
            --bg-tertiary: #f1f5f9;
            --bg-card: #ffffff;
            --border-color: #e2e8f0;
            --border-light: #f1f5f9;
            --text-primary: #0f172a;
            --text-secondary: #475569;
            --text-muted: #94a3b8;
            --accent-primary: #f6821f;
            --accent-secondary: #fbad41;
            --accent-light: #fff7ed;
            --accent-gradient: linear-gradient(135deg, #f6821f 0%, #fbad41 100%);
            --green-accent: #10b981;
            --green-light: #ecfdf5;
            --yellow-accent: #f59e0b;
            --yellow-light: #fffbeb;
            --red-accent: #ef4444;
            --red-light: #fef2f2;
            --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.07), 0 2px 4px -2px rgba(0, 0, 0, 0.05);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.08), 0 4px 6px -4px rgba(0, 0, 0, 0.05);
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-secondary);
            color: var(--text-primary);
            min-height: 100vh;
        }

        .page-wrapper {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Header */
        header {
            position: sticky;
            top: 0;
            z-index: 100;
            padding: 0.875rem 2rem;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--border-color);
        }

        .header-content {
            max-width: 1600px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 1.5rem;
        }

        .logo-group {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .logo-img {
            height: 32px;
            width: auto;
        }

        .logo-text {
            font-family: 'Outfit', sans-serif;
            font-weight: 700;
            font-size: 1.125rem;
            color: var(--text-primary);
            letter-spacing: -0.02em;
        }

        .header-badge {
            padding: 0.375rem 0.75rem;
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            font-size: 0.6875rem;
            font-weight: 700;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .logout-btn {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            background: transparent;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            color: var(--text-secondary);
            font-family: inherit;
            font-size: 0.8125rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .logout-btn:hover {
            color: var(--red-accent);
            border-color: var(--red-accent);
            background: var(--red-light);
        }

        .logout-btn svg {
            width: 16px;
            height: 16px;
        }

        /* Main content */
        main {
            flex: 1;
            max-width: 1600px;
            margin: 0 auto;
            padding: 1.5rem 2rem;
            width: 100%;
        }

        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        @media (max-width: 1024px) {
            .stats-grid { grid-template-columns: repeat(2, 1fr); }
        }

        @media (max-width: 640px) {
            .stats-grid { grid-template-columns: 1fr; }
        }

        .stat-card {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 14px;
            padding: 1.25rem;
            transition: all 0.2s ease;
        }

        .stat-card:hover {
            box-shadow: var(--shadow-md);
            transform: translateY(-1px);
        }

        .stat-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 0.75rem;
        }

        .stat-label {
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .stat-icon {
            width: 36px;
            height: 36px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .stat-icon svg {
            width: 18px;
            height: 18px;
        }

        .stat-card.total .stat-icon { background: var(--accent-light); color: var(--accent-primary); }
        .stat-card.pending .stat-icon { background: var(--yellow-light); color: var(--yellow-accent); }
        .stat-card.approved .stat-icon { background: var(--green-light); color: var(--green-accent); }
        .stat-card.rejected .stat-icon { background: var(--red-light); color: var(--red-accent); }

        .stat-value {
            font-family: 'Outfit', sans-serif;
            font-size: 2rem;
            font-weight: 700;
            letter-spacing: -0.02em;
            line-height: 1;
        }

        .stat-card.total .stat-value { color: var(--text-primary); }
        .stat-card.pending .stat-value { color: var(--yellow-accent); }
        .stat-card.approved .stat-value { color: var(--green-accent); }
        .stat-card.rejected .stat-value { color: var(--red-accent); }

        /* Actions Bar */
        .actions-bar {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 1rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }

        .actions-left {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .search-box {
            position: relative;
            flex: 1;
            max-width: 280px;
        }

        .search-icon {
            position: absolute;
            left: 0.75rem;
            top: 50%;
            transform: translateY(-50%);
            width: 16px;
            height: 16px;
            color: var(--text-muted);
            pointer-events: none;
        }

        .search-input {
            width: 100%;
            padding: 0.5rem 0.875rem 0.5rem 2.25rem;
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            color: var(--text-primary);
            font-family: inherit;
            font-size: 0.8125rem;
            transition: all 0.2s ease;
        }

        .search-input::placeholder {
            color: var(--text-muted);
        }

        .search-input:focus {
            outline: none;
            border-color: var(--accent-primary);
            box-shadow: 0 0 0 2px rgba(246, 130, 31, 0.1);
        }

        .filter-select {
            padding: 0.5rem 2rem 0.5rem 0.875rem;
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            color: var(--text-primary);
            font-family: inherit;
            font-size: 0.8125rem;
            cursor: pointer;
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='%2394a3b8' viewBox='0 0 16 16'%3E%3Cpath d='M4 6l4 4 4-4'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 0.5rem center;
            transition: all 0.2s ease;
        }

        .filter-select:focus {
            outline: none;
            border-color: var(--accent-primary);
            box-shadow: 0 0 0 2px rgba(246, 130, 31, 0.1);
        }

        .date-range {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .date-input-wrapper {
            display: flex;
            align-items: center;
            gap: 0.375rem;
        }

        .date-label {
            font-size: 0.75rem;
            font-weight: 500;
            color: var(--text-muted);
        }

        .date-input {
            padding: 0.5rem 0.625rem;
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            color: var(--text-primary);
            font-family: inherit;
            font-size: 0.8125rem;
            transition: all 0.2s ease;
        }

        .date-input:focus {
            outline: none;
            border-color: var(--accent-primary);
            box-shadow: 0 0 0 2px rgba(246, 130, 31, 0.1);
        }

        .icon-btn {
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .icon-btn:hover {
            color: var(--accent-primary);
            border-color: var(--accent-primary);
            background: var(--accent-light);
        }

        .icon-btn svg {
            width: 16px;
            height: 16px;
        }

        .export-btn {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            background: var(--accent-gradient);
            border: none;
            border-radius: 8px;
            color: #fff;
            font-family: inherit;
            font-size: 0.8125rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .export-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 6px 20px -6px rgba(246, 130, 31, 0.5);
        }

        .export-btn svg {
            width: 16px;
            height: 16px;
        }

        /* Table Container */
        .table-container {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 14px;
            overflow: hidden;
            box-shadow: var(--shadow-sm);
        }

        .table-wrapper {
            overflow-x: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        thead {
            background: var(--bg-tertiary);
            border-bottom: 1px solid var(--border-color);
        }

        th {
            padding: 0.875rem 1rem;
            text-align: left;
            font-size: 0.6875rem;
            font-weight: 700;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.08em;
            white-space: nowrap;
        }

        th:last-child {
            text-align: right;
        }

        tbody tr {
            border-bottom: 1px solid var(--border-light);
            transition: background 0.15s ease;
        }

        tbody tr:last-child {
            border-bottom: none;
        }

        tbody tr:hover {
            background: var(--bg-secondary);
        }

        td {
            padding: 0.875rem 1rem;
            font-size: 0.8125rem;
            color: var(--text-secondary);
            vertical-align: middle;
        }

        td:last-child {
            text-align: right;
        }

        .cell-name {
            font-weight: 600;
            color: var(--text-primary);
        }

        .cell-email {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.75rem;
        }

        .cell-address {
            max-width: 180px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .cell-date {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.6875rem;
            color: var(--text-muted);
        }

        .cell-promo {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.75rem;
            font-weight: 500;
            color: var(--accent-primary);
        }

        .no-promo {
            color: var(--text-muted);
        }

        /* Status Badge */
        .status-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.375rem;
            padding: 0.25rem 0.625rem;
            border-radius: 100px;
            font-size: 0.625rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.03em;
        }

        .status-badge::before {
            content: '';
            width: 5px;
            height: 5px;
            border-radius: 50%;
        }

        .status-badge.pending {
            background: var(--yellow-light);
            color: var(--yellow-accent);
        }

        .status-badge.pending::before {
            background: var(--yellow-accent);
            animation: pulse 2s ease-in-out infinite;
        }

        .status-badge.approved {
            background: var(--green-light);
            color: var(--green-accent);
        }

        .status-badge.approved::before {
            background: var(--green-accent);
        }

        .status-badge.rejected {
            background: var(--red-light);
            color: var(--red-accent);
        }

        .status-badge.rejected::before {
            background: var(--red-accent);
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.4; }
        }

        /* Action Buttons */
        .action-buttons {
            display: flex;
            align-items: center;
            justify-content: flex-end;
            gap: 0.375rem;
        }

        .action-btn {
            width: 28px;
            height: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: transparent;
            border: 1px solid transparent;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.15s ease;
        }

        .action-btn svg {
            width: 14px;
            height: 14px;
        }

        .action-btn.approve {
            color: var(--green-accent);
        }

        .action-btn.approve:hover {
            background: var(--green-light);
            border-color: var(--green-accent);
        }

        .action-btn.delete {
            color: var(--red-accent);
        }

        .action-btn.delete:hover {
            background: var(--red-light);
            border-color: var(--red-accent);
        }

        /* Empty State */
        .empty-state {
            display: none;
            padding: 3rem 2rem;
            text-align: center;
        }

        .empty-state.show {
            display: block;
        }

        .empty-icon {
            width: 56px;
            height: 56px;
            margin: 0 auto 1rem;
            background: var(--bg-tertiary);
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-muted);
        }

        .empty-icon svg {
            width: 24px;
            height: 24px;
        }

        .empty-title {
            font-family: 'Outfit', sans-serif;
            font-size: 1.125rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 0.375rem;
        }

        .empty-text {
            color: var(--text-secondary);
            font-size: 0.8125rem;
        }

        /* Loading State */
        .loading-state {
            display: none;
            padding: 3rem 2rem;
            text-align: center;
        }

        .loading-state.show {
            display: block;
        }

        .loading-spinner {
            width: 32px;
            height: 32px;
            margin: 0 auto 0.875rem;
            border: 3px solid var(--border-color);
            border-top-color: var(--accent-primary);
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .loading-text {
            color: var(--text-secondary);
            font-size: 0.8125rem;
        }

        /* Pagination */
        .pagination {
            display: none;
            align-items: center;
            justify-content: space-between;
            padding: 1rem 1.25rem;
            border-top: 1px solid var(--border-color);
            gap: 1rem;
            flex-wrap: wrap;
        }

        .pagination.show {
            display: flex;
        }

        .pagination-info {
            font-size: 0.8125rem;
            color: var(--text-secondary);
        }

        .pagination-controls {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .pagination-btn {
            display: flex;
            align-items: center;
            gap: 0.375rem;
            padding: 0.5rem 0.875rem;
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            color: var(--text-secondary);
            font-family: inherit;
            font-size: 0.8125rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .pagination-btn:hover:not(:disabled) {
            color: var(--accent-primary);
            border-color: var(--accent-primary);
            background: var(--accent-light);
        }

        .pagination-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .pagination-btn svg {
            width: 16px;
            height: 16px;
        }

        .page-numbers {
            display: flex;
            align-items: center;
            gap: 0.25rem;
        }

        .page-number {
            min-width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: transparent;
            border: 1px solid transparent;
            border-radius: 6px;
            color: var(--text-secondary);
            font-family: inherit;
            font-size: 0.8125rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.15s ease;
        }

        .page-number:hover {
            background: var(--bg-tertiary);
        }

        .page-number.active {
            background: var(--accent-gradient);
            color: #fff;
            border-color: transparent;
        }

        .page-ellipsis {
            min-width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-muted);
            font-size: 0.8125rem;
        }

        .pagination-size {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .pagination-label {
            font-size: 0.8125rem;
            color: var(--text-muted);
        }

        .pagination-select {
            padding: 0.375rem 1.75rem 0.375rem 0.625rem;
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            color: var(--text-primary);
            font-family: inherit;
            font-size: 0.8125rem;
            cursor: pointer;
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='%2394a3b8' viewBox='0 0 16 16'%3E%3Cpath d='M4 6l4 4 4-4'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 0.375rem center;
        }

        .pagination-select:focus {
            outline: none;
            border-color: var(--accent-primary);
        }

        /* Modal */
        .modal-overlay {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(15, 23, 42, 0.5);
            backdrop-filter: blur(4px);
            z-index: 200;
            align-items: center;
            justify-content: center;
            padding: 2rem;
        }

        .modal-overlay.show {
            display: flex;
        }

        .modal {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            padding: 1.75rem;
            max-width: 380px;
            width: 100%;
            box-shadow: var(--shadow-lg);
            animation: modalIn 0.2s ease-out;
        }

        @keyframes modalIn {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }

        .modal-title {
            font-family: 'Outfit', sans-serif;
            font-size: 1.125rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
        }

        .modal-message {
            color: var(--text-secondary);
            font-size: 0.875rem;
            line-height: 1.6;
            margin-bottom: 1.5rem;
        }

        .modal-actions {
            display: flex;
            justify-content: flex-end;
            gap: 0.625rem;
        }

        .modal-btn {
            padding: 0.5rem 1rem;
            border-radius: 8px;
            font-family: inherit;
            font-size: 0.8125rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.15s ease;
        }

        .modal-btn.cancel {
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            color: var(--text-secondary);
        }

        .modal-btn.cancel:hover {
            color: var(--text-primary);
            border-color: var(--text-muted);
        }

        .modal-btn.confirm {
            background: var(--accent-gradient);
            border: none;
            color: #fff;
        }

        .modal-btn.confirm:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px -4px rgba(246, 130, 31, 0.5);
        }

        /* Toast */
        .toast {
            position: fixed;
            bottom: 1.5rem;
            right: 1.5rem;
            display: none;
            align-items: center;
            gap: 0.625rem;
            padding: 0.875rem 1rem;
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 10px;
            box-shadow: var(--shadow-lg);
            z-index: 300;
            animation: toastIn 0.3s ease-out;
        }

        .toast.show {
            display: flex;
        }

        @keyframes toastIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .toast-icon {
            width: 18px;
            height: 18px;
        }

        .toast.success .toast-icon { color: var(--green-accent); }
        .toast.error .toast-icon { color: var(--red-accent); }

        .toast-message {
            font-size: 0.8125rem;
            font-weight: 500;
            color: var(--text-primary);
        }

        /* Footer */
        footer {
            padding: 1.25rem 2rem;
            text-align: center;
            font-size: 0.75rem;
            color: var(--text-muted);
            border-top: 1px solid var(--border-color);
            background: var(--bg-primary);
        }

        /* Responsive */
        @media (max-width: 768px) {
            header { padding: 0.75rem 1rem; }
            main { padding: 1rem; }
            .actions-bar {
                flex-direction: column;
                align-items: stretch;
            }
            .actions-left { 
                width: 100%;
                flex-wrap: wrap;
                gap: 0.5rem;
            }
            .search-box {
                max-width: none;
                width: 100%;
            }
            .filter-select { flex: 1; }
            .date-range {
                width: 100%;
                flex-wrap: wrap;
            }
            .date-input-wrapper {
                flex: 1;
            }
            .date-input {
                width: 100%;
            }
            .pagination {
                flex-direction: column;
                gap: 0.75rem;
            }
            .pagination-controls {
                order: -1;
                width: 100%;
                justify-content: center;
            }
            .pagination-info {
                text-align: center;
            }
            .pagination-size {
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <div class="page-wrapper">
        <!-- Header -->
        <header>
            <div class="header-content">
                <div class="header-left">
                    <div class="logo-group">
                        <svg class="logo-img" viewBox="0 0 239 54" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <g clip-path="url(#clip0_dashboard)">
                                <path d="M51.027 36.4346L51.405 35.1054C51.8639 33.532 51.6929 32.0671 50.928 31.0001C50.2261 30.0144 49.0562 29.4358 47.6343 29.3635L20.7268 29.0199C20.5469 29.0108 20.3939 28.9294 20.3039 28.7937C20.2139 28.6581 20.1869 28.4772 20.25 28.3054C20.3399 28.0432 20.6009 27.8353 20.8709 27.8262L48.0212 27.4826C51.243 27.3379 54.7257 24.7066 55.9496 21.5055L57.4974 17.4364C57.5424 17.3279 57.5604 17.2104 57.5604 17.0928C57.5604 17.0295 57.5514 16.9662 57.5424 16.9029C55.7966 8.95458 48.7322 3.01367 40.3 3.01367C32.5248 3.01367 25.9194 8.05937 23.5526 15.0673C22.0227 13.9189 20.0699 13.304 17.9641 13.5119C14.2295 13.8827 11.2328 16.9029 10.8638 20.6555C10.7648 21.6321 10.8458 22.5634 11.0707 23.4496C4.97834 23.6305 0.0917969 28.649 0.0917969 34.807C0.0917969 35.3676 0.136793 35.9101 0.208786 36.4527C0.244782 36.715 0.469762 36.9048 0.730737 36.9048L50.397 36.9139C50.4061 36.9139 50.4061 36.9139 50.4151 36.9139C50.6941 36.9048 50.946 36.715 51.027 36.4346Z" fill="#F6821F"/>
                                <path d="M59.9905 17.7363C59.7386 17.7363 59.4955 17.7454 59.2436 17.7544C59.1986 17.7544 59.1626 17.7634 59.1266 17.7815C59.0006 17.8267 58.8926 17.9352 58.8567 18.0709L57.7948 21.7421C57.3357 23.3155 57.5068 24.7803 58.2717 25.8473C58.9736 26.833 60.1435 27.4117 61.5654 27.4841L67.2979 27.8277C67.4688 27.8367 67.6129 27.9181 67.7028 28.0537C67.8018 28.1894 67.8198 28.3702 67.7658 28.5421C67.6758 28.8042 67.4148 29.0122 67.1449 29.0213L61.1874 29.3649C57.9567 29.5186 54.465 32.1409 53.2411 35.342L52.8092 36.4722C52.7282 36.6803 52.8812 36.8973 53.0881 36.9063C53.0972 36.9063 53.0972 36.9063 53.1062 36.9063H73.6153C73.8583 36.9063 74.0742 36.7435 74.1463 36.5085C74.5062 35.2334 74.6952 33.8952 74.6952 32.5027C74.6952 24.3554 68.1078 17.7363 59.9905 17.7363Z" fill="#FBAD41"/>
                                <path d="M97.3086 24.3633H100.701V33.686H106.641V36.6701H97.3086V24.3633Z" fill="black"/>
                                <path d="M110.16 30.5496V30.5134C110.16 26.9778 112.995 24.1113 116.774 24.1113C120.555 24.1113 123.353 26.9417 123.353 30.4773V30.5134C123.353 34.049 120.519 36.9155 116.739 36.9155C112.959 36.9155 110.16 34.0852 110.16 30.5496ZM119.888 30.5496V30.5134C119.888 28.7411 118.611 27.1858 116.739 27.1858C114.885 27.1858 113.643 28.6959 113.643 30.4773V30.5134C113.643 32.2857 114.921 33.841 116.774 33.841C118.647 33.841 119.888 32.331 119.888 30.5496Z" fill="black"/>
                                <path d="M127.51 31.2716V24.3633H130.956V31.2084C130.956 32.9807 131.847 33.8307 133.215 33.8307C134.582 33.8307 135.474 33.026 135.474 31.2989V24.3723H138.92V31.1993C138.92 35.178 136.662 36.9142 133.179 36.9142C129.696 36.8961 127.51 35.1238 127.51 31.2716Z" fill="black"/>
                                <path d="M144.123 24.3633H148.847C153.222 24.3633 155.759 26.8951 155.759 30.4489V30.485C155.759 34.0386 153.185 36.6791 148.775 36.6791H144.123V24.3633ZM148.902 33.6498C150.935 33.6498 152.277 32.5286 152.277 30.5392V30.5031C152.277 28.5319 150.927 27.3925 148.902 27.3925H147.516V33.6498H148.902Z" fill="black"/>
                                <path d="M160.689 24.3633H170.499V27.3473H164.092V29.4451H169.887V32.2754H164.092V36.6701H160.689V24.3633Z" fill="black"/>
                                <path d="M175.225 24.3633H178.617V33.686H184.548V36.6701H175.225V24.3633Z" fill="black"/>
                                <path d="M193.429 24.2734H196.705L201.924 36.6706H198.279L197.388 34.4734H192.664L191.791 36.6706H188.219L193.429 24.2734ZM196.399 31.8148L195.031 28.3154L193.645 31.8148H196.399Z" fill="black"/>
                                <path d="M206.289 24.3633H212.085C213.956 24.3633 215.253 24.8606 216.072 25.7015C216.791 26.4068 217.16 27.3563 217.16 28.568V28.6042C217.16 30.485 216.161 31.7328 214.641 32.3839L217.565 36.6791H213.642L211.175 32.9536H209.682V36.6791H206.289V24.3633ZM211.922 30.268C213.074 30.268 213.741 29.7073 213.741 28.8121V28.776C213.741 27.8084 213.038 27.3202 211.905 27.3202H209.682V30.277H211.922V30.268Z" fill="black"/>
                                <path d="M222.057 24.3633H231.91V27.2658H225.422V29.1286H231.298V31.8143H225.422V33.7674H232V36.6701H222.057V24.3633Z" fill="black"/>
                                <path d="M89.8752 31.9964C89.3982 33.0725 88.3993 33.841 87.0674 33.841C85.2137 33.841 83.9358 32.2947 83.9358 30.5134V30.4773C83.9358 28.705 85.1776 27.1858 87.0315 27.1858C88.4263 27.1858 89.4972 28.0539 89.9472 29.2294H93.5288C92.9529 26.2996 90.3972 24.1113 87.0674 24.1113C83.2879 24.1113 80.4531 26.9778 80.4531 30.5134V30.5496C80.4531 34.0852 83.2518 36.9155 87.0315 36.9155C90.2622 36.9155 92.791 34.8086 93.4569 31.9874H89.8752V31.9964Z" fill="black"/>
                            </g>
                            <defs>
                                <clipPath id="clip0_dashboard">
                                    <rect width="231.908" height="35.9294" fill="white" transform="translate(0.0917969 2)"/>
                                </clipPath>
                            </defs>
                        </svg>
                        <span class="logo-text">Swag Request</span>
                    </div>
                    <span class="header-badge">Dashboard</span>
                </div>
                <button id="logout-btn" class="logout-btn">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path>
                    </svg>
                    Logout
                </button>
            </div>
        </header>

        <!-- Main Content -->
        <main>
            <!-- Stats Grid -->
            <div class="stats-grid">
                <div class="stat-card total">
                    <div class="stat-header">
                        <span class="stat-label">Total Requests</span>
                        <div class="stat-icon">
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path>
                            </svg>
                        </div>
                    </div>
                    <div id="stat-total" class="stat-value">--</div>
                </div>

                <div class="stat-card pending">
                    <div class="stat-header">
                        <span class="stat-label">Pending</span>
                        <div class="stat-icon">
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                    <div id="stat-pending" class="stat-value">--</div>
                </div>

                <div class="stat-card approved">
                    <div class="stat-header">
                        <span class="stat-label">Approved</span>
                        <div class="stat-icon">
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                    <div id="stat-approved" class="stat-value">--</div>
                </div>

                <div class="stat-card rejected">
                    <div class="stat-header">
                        <span class="stat-label">Rejected</span>
                        <div class="stat-icon">
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                    <div id="stat-rejected" class="stat-value">--</div>
                </div>
            </div>

            <!-- Actions Bar -->
            <div class="actions-bar">
                <div class="actions-left">
                    <div class="search-box">
                        <svg class="search-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                        </svg>
                        <input type="text" id="search-input" class="search-input" placeholder="Search name, email, phone, promo...">
                    </div>
                    <select id="status-filter" class="filter-select">
                        <option value="all">All Requests</option>
                        <option value="pending">Pending Only</option>
                        <option value="approved">Approved Only</option>
                        <option value="rejected">Rejected Only</option>
                    </select>
                    <div class="date-range">
                        <div class="date-input-wrapper">
                            <label class="date-label">From</label>
                            <input type="date" id="date-from" class="date-input">
                        </div>
                        <div class="date-input-wrapper">
                            <label class="date-label">To</label>
                            <input type="date" id="date-to" class="date-input">
                        </div>
                        <button id="clear-dates-btn" class="icon-btn" title="Clear dates">
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                            </svg>
                        </button>
                    </div>
                    <button id="refresh-btn" class="icon-btn" title="Refresh">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                        </svg>
                    </button>
                </div>
                <button id="export-csv-btn" class="export-btn">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                    </svg>
                    Export Approved to CSV
                </button>
            </div>

            <!-- Table Container -->
            <div class="table-container">
                <div class="table-wrapper">
                    <table>
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Email</th>
                                <th class="col-phone">Phone</th>
                                <th class="col-address">Address</th>
                                <th class="col-promo">Promo Code</th>
                                <th>Status</th>
                                <th class="col-date">Created</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="requests-table-body"></tbody>
                    </table>
                </div>

                <div id="empty-state" class="empty-state">
                    <div class="empty-icon">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"></path>
                        </svg>
                    </div>
                    <h3 class="empty-title">No requests found</h3>
                    <p class="empty-text">There are no swag requests matching your filter.</p>
                </div>

                <div id="loading-state" class="loading-state show">
                    <div class="loading-spinner"></div>
                    <p class="loading-text">Loading requests...</p>
                </div>

                <!-- Pagination -->
                <div id="pagination" class="pagination">
                    <div class="pagination-info">
                        <span id="pagination-summary">Showing 0 of 0</span>
                    </div>
                    <div class="pagination-controls">
                        <button id="prev-page" class="pagination-btn" disabled>
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                            </svg>
                            Previous
                        </button>
                        <div id="page-numbers" class="page-numbers"></div>
                        <button id="next-page" class="pagination-btn">
                            Next
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                            </svg>
                        </button>
                    </div>
                    <div class="pagination-size">
                        <label class="pagination-label">Per page:</label>
                        <select id="items-per-page" class="pagination-select">
                            <option value="10">10</option>
                            <option value="25">25</option>
                            <option value="50">50</option>
                            <option value="100">100</option>
                        </select>
                    </div>
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer>
            &copy; 2026 Cloudflare, Inc. All rights reserved.
        </footer>
    </div>

    <!-- Confirmation Modal -->
    <div id="confirm-modal" class="modal-overlay">
        <div class="modal">
            <h3 id="modal-title" class="modal-title">Confirm Action</h3>
            <p id="modal-message" class="modal-message"></p>
            <div class="modal-actions">
                <button id="modal-cancel" class="modal-btn cancel">Cancel</button>
                <button id="modal-confirm" class="modal-btn confirm">Confirm</button>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="toast">
        <svg class="toast-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
        </svg>
        <span id="toast-message" class="toast-message"></span>
    </div>

    <script>
        let requests = [];
        let currentFilter = 'all';
        let searchQuery = '';
        let dateFrom = '';
        let dateTo = '';
        let currentPage = 1;
        let itemsPerPage = 10;
        let pendingAction = null;

        const tableBody = document.getElementById('requests-table-body');
        const emptyState = document.getElementById('empty-state');
        const loadingState = document.getElementById('loading-state');
        const statusFilter = document.getElementById('status-filter');
        const confirmModal = document.getElementById('confirm-modal');
        const toast = document.getElementById('toast');

        async function checkAuth() {
            try {
                const response = await fetch('/api/admin/check-auth');
                if (!response.ok) window.location.href = '/admin/login';
            } catch (error) {
                window.location.href = '/admin/login';
            }
        }

        async function fetchRequests() {
            loadingState.classList.add('show');
            emptyState.classList.remove('show');
            tableBody.innerHTML = '';

            try {
                const response = await fetch('/api/admin/requests');
                if (!response.ok) {
                    if (response.status === 401) {
                        window.location.href = '/admin/login';
                        return;
                    }
                    throw new Error('Failed to fetch');
                }
                requests = await response.json();
                updateStats();
                renderTable();
            } catch (error) {
                showToast('Failed to load requests', 'error');
            } finally {
                loadingState.classList.remove('show');
            }
        }

        function updateStats() {
            const total = requests.length;
            const pending = requests.filter(r => r.status === 'pending').length;
            const approved = requests.filter(r => r.status === 'approved').length;
            const rejected = requests.filter(r => r.status === 'rejected').length;

            animateValue('stat-total', total);
            animateValue('stat-pending', pending);
            animateValue('stat-approved', approved);
            animateValue('stat-rejected', rejected);
        }

        function animateValue(id, target) {
            const el = document.getElementById(id);
            const current = parseInt(el.textContent) || 0;
            if (current === target) { el.textContent = target; return; }
            
            let start = current;
            const duration = 300;
            const startTime = performance.now();
            
            function update(currentTime) {
                const elapsed = currentTime - startTime;
                const progress = Math.min(elapsed / duration, 1);
                el.textContent = Math.floor(start + (target - start) * progress);
                if (progress < 1) requestAnimationFrame(update);
            }
            requestAnimationFrame(update);
        }

        function getFilteredRequests() {
            let filteredRequests = currentFilter === 'all' 
                ? requests 
                : requests.filter(r => r.status === currentFilter);

            if (searchQuery) {
                const query = searchQuery.toLowerCase();
                filteredRequests = filteredRequests.filter(r => 
                    r.name.toLowerCase().includes(query) ||
                    r.email.toLowerCase().includes(query) ||
                    r.phone.toLowerCase().includes(query) ||
                    (r.promo_code && r.promo_code.toLowerCase().includes(query))
                );
            }

            if (dateFrom) {
                const fromDate = new Date(dateFrom);
                fromDate.setHours(0, 0, 0, 0);
                filteredRequests = filteredRequests.filter(r => new Date(r.created_at) >= fromDate);
            }

            if (dateTo) {
                const toDate = new Date(dateTo);
                toDate.setHours(23, 59, 59, 999);
                filteredRequests = filteredRequests.filter(r => new Date(r.created_at) <= toDate);
            }

            return filteredRequests;
        }

        function renderTable() {
            const filteredRequests = getFilteredRequests();
            const totalItems = filteredRequests.length;
            const totalPages = Math.ceil(totalItems / itemsPerPage);

            // Reset to page 1 if current page exceeds total pages
            if (currentPage > totalPages && totalPages > 0) {
                currentPage = 1;
            }

            const pagination = document.getElementById('pagination');

            if (totalItems === 0) {
                emptyState.classList.add('show');
                pagination.classList.remove('show');
                tableBody.innerHTML = '';
                return;
            }

            // Calculate pagination
            const startIndex = (currentPage - 1) * itemsPerPage;
            const endIndex = Math.min(startIndex + itemsPerPage, totalItems);
            const paginatedRequests = filteredRequests.slice(startIndex, endIndex);

            emptyState.classList.remove('show');
            pagination.classList.add('show');

            // Update pagination info
            document.getElementById('pagination-summary').textContent = 
                `Showing ${startIndex + 1}-${endIndex} of ${totalItems}`;

            // Update pagination controls
            document.getElementById('prev-page').disabled = currentPage === 1;
            document.getElementById('next-page').disabled = currentPage === totalPages;

            // Render page numbers
            renderPageNumbers(totalPages);

            tableBody.innerHTML = paginatedRequests.map(request => `
                <tr>
                    <td class="cell-name">${escapeHtml(request.name)}</td>
                    <td class="cell-email">${escapeHtml(request.email)}</td>
                    <td class="col-phone">${escapeHtml(request.phone)}</td>
                    <td class="col-address cell-address" title="${escapeHtml(request.address)}">${escapeHtml(request.address)}</td>
                    <td class="col-promo cell-promo">${request.promo_code ? escapeHtml(request.promo_code) : '<span class="no-promo">-</span>'}</td>
                    <td><span class="status-badge ${request.status}">${request.status}</span></td>
                    <td class="col-date cell-date">${formatDate(request.created_at)}</td>
                    <td>
                        <div class="action-buttons">
                            ${request.status === 'pending' ? `
                                <button onclick="approveRequest(${request.id})" class="action-btn approve" title="Approve">
                                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                                    </svg>
                                </button>
                            ` : ''}
                            <button onclick="deleteRequest(${request.id})" class="action-btn delete" title="Delete">
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                </svg>
                            </button>
                        </div>
                    </td>
                </tr>
            `).join('');
        }

        function renderPageNumbers(totalPages) {
            const container = document.getElementById('page-numbers');
            container.innerHTML = '';

            if (totalPages <= 7) {
                // Show all pages
                for (let i = 1; i <= totalPages; i++) {
                    container.appendChild(createPageButton(i));
                }
            } else {
                // Show first, last, and pages around current
                container.appendChild(createPageButton(1));

                if (currentPage > 3) {
                    container.appendChild(createEllipsis());
                }

                const start = Math.max(2, currentPage - 1);
                const end = Math.min(totalPages - 1, currentPage + 1);

                for (let i = start; i <= end; i++) {
                    container.appendChild(createPageButton(i));
                }

                if (currentPage < totalPages - 2) {
                    container.appendChild(createEllipsis());
                }

                container.appendChild(createPageButton(totalPages));
            }
        }

        function createPageButton(page) {
            const btn = document.createElement('button');
            btn.className = `page-number${page === currentPage ? ' active' : ''}`;
            btn.textContent = page;
            btn.addEventListener('click', () => goToPage(page));
            return btn;
        }

        function createEllipsis() {
            const span = document.createElement('span');
            span.className = 'page-ellipsis';
            span.textContent = '...';
            return span;
        }

        function goToPage(page) {
            currentPage = page;
            renderTable();
        }

        function formatDate(dateStr) {
            return new Date(dateStr).toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: '2-digit' });
        }

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        function showModal(title, message, onConfirm) {
            document.getElementById('modal-title').textContent = title;
            document.getElementById('modal-message').textContent = message;
            pendingAction = onConfirm;
            confirmModal.classList.add('show');
        }

        function hideModal() {
            confirmModal.classList.remove('show');
            pendingAction = null;
        }

        function showToast(message, type = 'success') {
            const toastEl = document.getElementById('toast');
            const toastMessage = document.getElementById('toast-message');
            const toastIcon = toastEl.querySelector('.toast-icon');
            
            toastMessage.textContent = message;
            toastEl.className = `toast show ${type}`;
            toastIcon.innerHTML = type === 'success' 
                ? '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>'
                : '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>';
            
            setTimeout(() => toastEl.classList.remove('show'), 3000);
        }

        function approveRequest(id) {
            showModal('Approve Request', 'Approve this swag request? The requester will be notified via email.', async () => {
                try {
                    const response = await fetch(`/api/admin/requests/${id}/approve`, { method: 'POST' });
                    if (response.ok) {
                        showToast('Request approved');
                        fetchRequests();
                    } else {
                        showToast((await response.json()).error || 'Failed to approve', 'error');
                    }
                } catch (error) {
                    showToast('Failed to approve', 'error');
                }
            });
        }

        function deleteRequest(id) {
            showModal('Delete Request', 'Permanently delete this request? This cannot be undone.', async () => {
                try {
                    const response = await fetch(`/api/admin/requests/${id}`, { method: 'DELETE' });
                    if (response.ok) {
                        showToast('Request deleted');
                        fetchRequests();
                    } else {
                        showToast((await response.json()).error || 'Failed to delete', 'error');
                    }
                } catch (error) {
                    showToast('Failed to delete', 'error');
                }
            });
        }

        async function exportCSV() {
            try {
                const response = await fetch('/api/admin/export-csv');
                if (!response.ok) throw new Error();
                
                const blob = await response.blob();
                const a = document.createElement('a');
                a.href = window.URL.createObjectURL(blob);
                a.download = `approved-requests-${new Date().toISOString().split('T')[0]}.csv`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                
                showToast('CSV exported');
            } catch (error) {
                showToast('Export failed', 'error');
            }
        }

        async function logout() {
            try { await fetch('/api/admin/logout', { method: 'POST' }); } catch {}
            window.location.href = '/admin/login';
        }

        document.getElementById('modal-cancel').addEventListener('click', hideModal);
        document.getElementById('modal-confirm').addEventListener('click', () => { if (pendingAction) pendingAction(); hideModal(); });
        statusFilter.addEventListener('change', (e) => { currentFilter = e.target.value; currentPage = 1; renderTable(); });
        document.getElementById('search-input').addEventListener('input', (e) => { searchQuery = e.target.value.trim(); currentPage = 1; renderTable(); });
        document.getElementById('date-from').addEventListener('change', (e) => { dateFrom = e.target.value; currentPage = 1; renderTable(); });
        document.getElementById('date-to').addEventListener('change', (e) => { dateTo = e.target.value; currentPage = 1; renderTable(); });
        document.getElementById('clear-dates-btn').addEventListener('click', () => {
            dateFrom = '';
            dateTo = '';
            document.getElementById('date-from').value = '';
            document.getElementById('date-to').value = '';
            currentPage = 1;
            renderTable();
        });
        document.getElementById('prev-page').addEventListener('click', () => { if (currentPage > 1) goToPage(currentPage - 1); });
        document.getElementById('next-page').addEventListener('click', () => { 
            const totalPages = Math.ceil(getFilteredRequests().length / itemsPerPage);
            if (currentPage < totalPages) goToPage(currentPage + 1); 
        });
        document.getElementById('items-per-page').addEventListener('change', (e) => {
            itemsPerPage = parseInt(e.target.value);
            currentPage = 1;
            renderTable();
        });
        document.getElementById('refresh-btn').addEventListener('click', fetchRequests);
        document.getElementById('export-csv-btn').addEventListener('click', exportCSV);
        document.getElementById('logout-btn').addEventListener('click', logout);
        confirmModal.addEventListener('click', (e) => { if (e.target === confirmModal) hideModal(); });
        document.addEventListener('keydown', (e) => { if (e.key === 'Escape' && confirmModal.classList.contains('show')) hideModal(); });

        checkAuth();
        fetchRequests();
    </script>
</body>
</html>
